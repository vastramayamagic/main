<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Checkout - Vastramaya</title>
    
    <!-- External Assets -->
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Restore Lottie Player -->
    <script src="https://unpkg.com/lottie-web@5.12.2/build/player/lottie.min.js"></script>

    <style>
        :root {
            /* Luxury Palette */
            --brand-maroon: #5d0e1a;
            --brand-gold: #c5a059;
            --brand-dark: #0f1218;
            --white: #ffffff;
            
            /* Truck Anim Colors */
            --anim-primary: #8b2635;
            --anim-primary-light: #d33d49;
            --anim-grey: #e0e0e0;
            
            --ui-scale: 2.8; 
            --font-main: 'DM Sans', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }

        body {
            background-color: #fdfbf8;
            font-family: var(--font-main);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* --- TRIGGER BUTTON --- */
        .btn-pay {
            padding: 20px 45px;
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--white);
            background: var(--brand-maroon);
            border: none;
            border-radius: 2px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(93, 14, 26, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn-pay:hover {
            background: #7a1423;
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(93, 14, 26, 0.3);
        }

        /* --- STAGE & TRUCK (CORE FUNCTIONS) --- */
        .stage {
            position: fixed;
            left: 0; top: 50%; width: 100vw; height: 0;
            background: var(--brand-dark);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: height 0.7s cubic-bezier(0.85, 0, 0.15, 1);
        }

        .stage.active { height: 350px; transform: translateY(-50%); }
        .stage.full-screen { height: 100vh; transform: translateY(-50%); }

        .order-anim-container {
            position: relative; width: 240px; height: 63px;
            transform: scale(var(--ui-scale));
            transition: opacity 0.5s ease;
        }
        
        .lines {
            opacity: 0; position: absolute; height: 3px; background: var(--white);
            border-radius: 2px; width: 6px; top: 30px; left: 100%;
            box-shadow: 15px 0 0 var(--white), 30px 0 0 var(--white), 45px 0 0 var(--white), 60px 0 0 var(--white), 75px 0 0 var(--white);
        }

        .truck {
            width: 60px; height: 41px; left: 100%; z-index: 1; top: 11px;
            position: absolute; transform: translateX(24px);
        }

        .truck:before, .truck:after {
            --r: -90deg; content: ''; height: 2px; width: 20px; right: 58px;
            position: absolute; display: block; background: var(--white);
            border-radius: 1px; transform-origin: 100% 50%; transform: rotate(var(--r));
        }
        .truck:before { top: 4px; }
        .truck:after { --r: 90deg; bottom: 4px; }
        .truck .back { left: 0; top: 0; width: 60px; height: 41px; z-index: 1; position: absolute; background: linear-gradient(var(--white), var(--anim-grey)); border-radius: 2px; }
        .truck .front { overflow: hidden; position: absolute; border-radius: 2px 9px 9px 2px; width: 26px; height: 41px; left: 60px; }
        .truck .front:after { content: ''; position: absolute; border-radius: 2px 9px 9px 2px; background: var(--anim-primary); width: 24px; height: 41px; right: 0; }
        .truck .front .window { overflow: hidden; border-radius: 2px 8px 8px 2px; background: var(--anim-primary-light); transform: perspective(4px) rotateY(3deg); width: 22px; height: 41px; position: absolute; left: 2px; top: 0; z-index: 1; transform-origin: 0 50%; }
        .truck .front .window:before { content: ''; position: absolute; right: 0; top: 0; bottom: 0; width: 14px; background: var(--brand-dark); }
        .truck .light { width: 3px; height: 8px; left: 83px; transform-origin: 100% 50%; position: absolute; border-radius: 2px; transform: scaleX(.8); background: #f0dc5f; }
        .truck .light:before { content: ''; height: 4px; width: 10px; opacity: 0; position: absolute; left: 3px; top: 50%; margin-top: -2px; background: linear-gradient(90deg, #f0dc5f, transparent); }
        .truck .light.top { top: 4px; }
        .truck .light.bottom { bottom: 4px; }
        .box { position: absolute; width: 21px; height: 21px; right: 100%; top: 21px; background: linear-gradient(var(--brand-gold), #a68545); border-radius: 2px; }

        /* Trigger Logic */
        .animate .truck { animation: truck 7s ease forwards; }
        .animate .truck:before { animation: door1 2.4s ease forwards .3s; }
        .animate .truck:after { animation: door2 2.4s ease forwards .6s; }
        .animate .truck .light:before { animation: light 7s ease forwards; }
        .animate .box { animation: box 7s ease forwards; }
        .animate .lines { animation: lines 7s ease forwards; }

        @keyframes truck { 10%, 30% { transform: translateX(-164px); } 40% { transform: translateX(-104px); } 60% { transform: translateX(-224px); } 75%, 100% { transform: translateX(150vw); } }
        @keyframes box { 8%, 10% { transform: translateX(40px); opacity: 1; } 25% { transform: translateX(112px); opacity: 1; } 26%, 100% { transform: translateX(112px); opacity: 0; } }
        @keyframes lines { 0%, 30% { opacity: 0; } 35%, 65% { opacity: 1; } 70%, 100% { opacity: 0; transform: translateX(-150vw); } }
        @keyframes light { 0%, 35% { opacity: 0; } 40%, 100% { opacity: 1; } }
        @keyframes door1 { 30%, 50% { transform: rotate(35deg); } }
        @keyframes door2 { 30%, 50% { transform: rotate(-35deg); } }

        /* --- RESTORED SUCCESS UI --- */
        .lottie-wrapper {
            position: absolute;
            display: flex; flex-direction: column; align-items: center;
            opacity: 0; visibility: hidden;
            transition: all 0.8s ease;
            text-align: center;
            z-index: 2;
        }
        .lottie-wrapper.visible { opacity: 1; visibility: visible; }

        /* Re-implementing original Lottie container ID */
        #lottie { 
            width: 280px; height: 280px; 
            margin-bottom: -30px; 
        }

        .success-text {
            color: var(--white);
            font-size: 32px;
            font-weight: 300;
            letter-spacing: 8px;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .success-sub {
            color: var(--brand-gold);
            font-size: 13px;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 40px;
            opacity: 0.8;
        }

        /* PREMIUM ORDER CARD */
        .order-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px 50px;
            border-radius: 4px;
            display: flex; flex-direction: column; align-items: center;
            box-shadow: 0 40px 100px rgba(0,0,0,0.5);
            animation: fadeIn 1s ease forwards;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .id-label { color: rgba(255,255,255,0.4); font-size: 10px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
        .id-value { color: var(--white); font-family: monospace; font-size: 22px; font-weight: 700; letter-spacing: 4px; }
        
        .btn-home {
            margin-top: 35px;
            padding: 15px 40px;
            background: var(--white);
            color: var(--brand-dark);
            text-decoration: none;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-radius: 50px;
            transition: 0.3s;
        }
        .btn-home:hover { background: var(--brand-gold); color: var(--white); transform: translateY(-3px); }

        @media (max-width: 768px) {
            :root { --ui-scale: 1.6; }
            #lottie { width: 200px; height: 200px; }
            .success-text { font-size: 22px; }
            .order-card { padding: 25px; width: 90%; }
        }
    </style>
</head>
<body>

    <!-- Demo Trigger -->
    <button class="btn-pay" onclick="handleCheckoutDemo()">
        <i class="fas fa-shield-check"></i> Place Secure Order
    </button>

    <!-- Success Stage -->
    <div class="stage" id="stage">
        
        <!-- CSS Truck Animation -->
        <div class="order-anim-container" id="animBox">
            <div class="box"></div>
            <div class="truck">
                <div class="back"></div>
                <div class="front"><div class="window"></div></div>
                <div class="light top"></div>
                <div class="light bottom"></div>
            </div>
            <div class="lines"></div>
        </div>

        <!-- Restored Lottie & Details -->
        <div class="lottie-wrapper" id="lottieWrapper">
            <!-- Target for lottie.loadAnimation -->
            <div id="lottie"></div>
            
            <h2 class="success-text">Order Confirmed</h2>
            <p class="success-sub">Excellence is on its way</p>

            <div class="order-card">
                <span class="id-label">Tracking Identification</span>
                <span class="id-value" id="orderIdDisplay">VM-882910</span>
                <a href="javascript:location.reload()" class="btn-home">Return to Boutique</a>
            </div>
        </div>
    </div>

    <script>
        function handleCheckoutDemo() {
            // 1. Generate Order ID (Restoring generation logic)
            const generatedId = "VM-" + Math.floor(100000 + Math.random() * 900000);
            document.getElementById('orderIdDisplay').innerText = generatedId;

            // 2. Clear UI
            document.querySelector('.btn-pay').style.display = 'none';

            // 3. Start Sequence
            const stage = document.getElementById('stage');
            const truck = document.getElementById('animBox');
            const wrapper = document.getElementById('lottieWrapper');

            // 0s: Opening the stage
            stage.classList.add('active');

            // 0.5s: Triggering truck CSS animation
            setTimeout(() => {
                truck.classList.add('animate');
            }, 500);

            // 5.5s: Expansion and truck fade
            setTimeout(() => {
                stage.classList.add('full-screen');
                truck.style.opacity = '0';
            }, 5500);

            // 6.2s: Restore Lottie Loading Function
            setTimeout(() => {
                wrapper.classList.add('visible');
                
                // RESTORED: Exact lottie.loadAnimation logic
                lottie.loadAnimation({
                    container: document.getElementById('lottie'), // Target ID
                    renderer: 'svg',
                    loop: false,
                    autoplay: true,
                    // Note: If you have a local success.json, use: path: './success.json'
                    path: 'https://lottie.host/857e49aa-9d33-41c0-b8f1-f76156e5428a/39S52TjS0M.json'
                });
            }, 6200);
        }
    </script>
</body>
</html>

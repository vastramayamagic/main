<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Terms and Conditions | Vastramayamagic.in</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        /* --- NAVBAR STYLES (EXACT COPY) --- */
        :root {
            --header-height-desktop: 80px;
            --navbar-height-mobile: 70px;
            --page-bg: #fefcf3;
            --text-primary: #3f0b17;
            --text-secondary: #6b422a;
            --text-light: #a3715f;
            --brand-primary: #8b2635;
            --brand-secondary: #d33d49;
            --brand-gradient: linear-gradient(135deg, #8b2635 0%, #d33d49 100%);
            --surface-light: #fff9f0;
            --surface-card: #fffefb;
            --surface-hover: #f9f2e3;
            --border-subtle: #e8d5c4;
            --shadow-premium: 0 10px 25px -5px rgba(59, 11, 23, 0.1);
            --shadow-light: 0 2px 10px rgba(59, 11, 23, 0.05);
            --shadow-modal: 0 25px 50px -12px rgba(63, 11, 23, 0.25);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { min-height: 100vh; background: var(--page-bg); font-family: "DM Sans", sans-serif; overflow-x: hidden; color: var(--text-primary); width: 100%; }

        /* --- DESKTOP LAYOUT --- */
        .page-desktop { min-height: 100vh; display: flex; flex-direction: column; width: 100%; }
        
        .d-navbar { height: var(--header-height-desktop); background: var(--surface-card); border-bottom: 1px solid var(--border-subtle); position: fixed; top: 0; left: 0; right: 0; z-index: 1000; box-shadow: var(--shadow-light); }
        .d-navbar-container { max-width: 1440px; margin: 0 auto; height: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0 40px; }
        .d-navbar-logo { height: 60px; width: auto; object-fit: contain; cursor: pointer; }
        
        .d-nav-links { display: flex; align-items: center; gap: 32px; margin: 0 40px; }
        .d-nav-link { font-size: 15px; font-weight: 600; color: var(--text-primary); text-decoration: none; padding: 8px 0; position: relative; transition: color 0.2s ease; white-space: nowrap; }
        .d-nav-link:hover, .d-nav-link.active { color: var(--brand-primary); }
        .d-nav-link.active::after { content: ''; position: absolute; bottom: -4px; left: 0; right: 0; height: 2px; background: var(--brand-primary); border-radius: 1px; }

        .d-categories-dropdown { position: relative; }
        .d-categories-content { position: absolute; top: 100%; left: -20px; background: var(--surface-card); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 12px 0; min-width: 220px; box-shadow: var(--shadow-premium); opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.2s ease; z-index: 100; }
        .d-categories-dropdown:hover .d-categories-content { opacity: 1; visibility: visible; transform: translateY(0); }
        .d-category-item { display: block; padding: 12px 24px; color: var(--text-primary); text-decoration: none; font-size: 14px; font-weight: 500; transition: all 0.2s ease; }
        .d-category-item:hover { background: var(--surface-hover); color: var(--brand-primary); padding-left: 28px; }

        .d-search-container { flex: 1; max-width: 400px; position: relative; }
        .d-search-bar { width: 100%; padding: 12px 16px 12px 44px; border: 1px solid var(--border-subtle); border-radius: 10px; background: var(--surface-light); font-family: "DM Sans", sans-serif; font-size: 14px; color: var(--text-primary); outline: none; transition: all 0.2s ease; }
        .d-search-bar:focus { background: var(--surface-card); border-color: var(--brand-primary); box-shadow: 0 0 0 3px rgba(139, 38, 53, 0.1); }
        .d-search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-light); width: 18px; height: 18px; }

        .d-action-icons { display: flex; align-items: center; gap: 20px; }
        .d-icon-btn { position: relative; width: 40px; height: 40px; border-radius: 10px; background: var(--surface-light); border: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; text-decoration: none; color: inherit; }
        .d-icon-btn:hover { background: var(--surface-hover); border-color: var(--brand-primary); transform: translateY(-1px); }
        .d-icon-btn svg { width: 20px; height: 20px; stroke: var(--text-primary); stroke-width: 1.5; transition: stroke 0.2s ease; }
        .d-icon-btn:hover svg { stroke: var(--brand-primary); }

        /* --- BADGE STYLES (PILL SHAPE) --- */
        .cart-badge, .wishlist-badge { 
            position: absolute; top: -6px; right: -6px; 
            background: var(--brand-primary); color: white; 
            font-size: 11px; font-weight: 700; 
            min-width: 20px; height: 20px; 
            padding: 0 4px; /* Padding for double digits */
            border-radius: 10px; 
            display: flex; align-items: center; justify-content: center; 
            border: 2px solid var(--surface-card); 
            box-sizing: border-box;
        }

        .d-profile-dropdown { position: relative; }
        .d-profile-btn { width: 44px; height: 44px; border-radius: 10px; overflow: hidden; border: 1px solid var(--border-subtle); background: var(--surface-light); cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; }
        .d-profile-btn:hover { border-color: var(--brand-primary); transform: translateY(-1px); background: var(--surface-hover); }
        .d-profile-btn svg { width: 20px; height: 20px; stroke: var(--text-primary); }
        .d-profile-btn:hover svg { stroke: var(--brand-primary); }

        .profile-popup { position: absolute; top: calc(100% + 10px); right: 0; background: var(--surface-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 20px; min-width: 280px; box-shadow: var(--shadow-premium); opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.2s ease; z-index: 1000; }
        .profile-popup.show { opacity: 1; visibility: visible; transform: translateY(0); }
        .profile-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
        .profile-info { flex: 1; }
        .profile-name { font-weight: 700; font-size: 16px; color: var(--text-primary); margin-bottom: 4px; }
        .profile-email { font-size: 14px; color: var(--text-light); }
        
        .profile-links { display: flex; flex-direction: column; gap: 8px; }
        .profile-link { display: flex; align-items: center; padding: 12px 16px; color: var(--text-primary); text-decoration: none; border-radius: 10px; font-weight: 500; transition: all 0.2s ease; cursor: pointer; }
        .profile-link:hover { background: var(--surface-hover); color: var(--brand-primary); padding-left: 20px; transform: translateX(2px); }
        .profile-link svg { width: 18px; height: 18px; margin-right: 12px; stroke: var(--text-primary); stroke-width: 2; transition: stroke 0.2s; }
        .profile-link:hover svg { stroke: var(--brand-primary); }

        /* --- CART POPUP DESKTOP --- */
        .cart-popup { position: absolute; top: calc(100% + 10px); right: 0; background: var(--surface-card); border: 1px solid var(--border-subtle); border-radius: 16px; width: 420px; max-height: 520px; box-shadow: var(--shadow-premium); opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.2s ease; z-index: 1000; display: flex; flex-direction: column; overflow: hidden; }
        .cart-popup.show { opacity: 1; visibility: visible; transform: translateY(0); }
        .cart-popup-header { padding: 20px; border-bottom: 1px solid var(--border-subtle); background: var(--surface-light); flex-shrink: 0; }
        .cart-popup-title { font-weight: 700; font-size: 18px; color: var(--text-primary); margin-bottom: 4px; }
        .cart-popup-subtitle { font-size: 14px; color: var(--text-light); }
        .cart-popup-body { flex: 1; overflow-y: auto; padding: 0; min-height: 280px; max-height: 280px; }
        
        .cart-item { display: flex; align-items: center; padding: 16px; border-bottom: 1px solid var(--border-subtle); gap: 16px; transition: all 0.2s ease; position: relative; }
        .cart-item:hover { background: var(--surface-hover); }
        .cart-item-img { width: 70px; height: 70px; border-radius: 10px; object-fit: cover; border: 1px solid var(--border-subtle); }
        .cart-item-details { flex: 1; min-width: 0; }
        .cart-item-title { font-weight: 600; font-size: 14px; color: var(--text-primary); margin-bottom: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .cart-item-price { font-weight: 700; font-size: 15px; color: var(--brand-primary); }
        .cart-item-quantity { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
        .quantity-btn { width: 28px; height: 28px; border-radius: 8px; border: 1px solid var(--border-subtle); background: var(--surface-light); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 14px; color: var(--text-primary); }
        .quantity-btn:hover { border-color: var(--brand-primary); color: var(--brand-primary); background: var(--surface-card); }
        .quantity-value { font-weight: 600; min-width: 24px; text-align: center; font-size: 14px; color: var(--text-primary); }
        .cart-item-remove { position: absolute; top: 16px; right: 16px; width: 24px; height: 24px; border-radius: 6px; border: 1px solid var(--border-subtle); background: var(--surface-light); display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-light); }
        .cart-item-remove:hover { background: #fef2f2; border-color: #fecaca; color: #ef4444; }
        
        .cart-popup-footer { padding: 20px; border-top: 1px solid var(--border-subtle); background: var(--surface-card); box-shadow: 0 -2px 10px rgba(59, 11, 23, 0.05); flex-shrink: 0; }
        .cart-total { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
        .cart-total-label { font-weight: 600; font-size: 16px; color: var(--text-primary); }
        .cart-total-amount { font-weight: 700; font-size: 22px; color: var(--brand-primary); }
        .buy-btn { width: 100%; padding: 14px; background: var(--brand-gradient); color: white; border: none; border-radius: 10px; font-weight: 600; font-size: 15px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .buy-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(139, 38, 53, 0.3); }
        .empty-cart-msg { text-align: center; padding: 2rem; color: var(--text-light); }

        /* --- MOBILE LAYOUT --- */
        .page-mobile { min-height: 100vh; display: flex; flex-direction: column; display: none; width: 100%; }
        .m-navbar { height: var(--navbar-height-mobile); background: var(--surface-card); border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; position: fixed; top: 0; left: 0; right: 0; z-index: 1000; box-shadow: var(--shadow-light); }
        .m-menu-btn { width: 40px; height: 40px; border-radius: 10px; border: 1px solid var(--border-subtle); background: var(--surface-light); display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0; transition: all 0.2s ease; z-index: 2; min-width: 40px; }
        .m-menu-btn:hover { background: var(--surface-hover); }
        .m-menu-lines { width: 18px; height: 14px; position: relative; }
        .m-menu-lines::before, .m-menu-lines::after, .m-menu-lines span { content: ""; position: absolute; left: 0; right: 0; height: 2px; border-radius: 999px; background: var(--text-primary); }
        .m-menu-lines::before { top: 0; }
        .m-menu-lines span { top: 6px; }
        .m-menu-lines::after { bottom: 0; }
        .m-logo { height: 50px; width: auto; object-fit: contain; position: absolute; left: calc(42.5%); transform: translateX(-50%); }
        .m-right-icons { display: flex; align-items: center; gap: 12px; z-index: 2; min-width: 92px; justify-content: flex-end; }
        .m-icon-btn { width: 40px; height: 40px; border-radius: 10px; background: var(--surface-light); border: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; position: relative; }
        .m-icon-btn:hover { background: var(--surface-hover); }
        .m-icon-btn svg { width: 20px; height: 20px; stroke: var(--text-primary); stroke-width: 1.5; }

        .mobile-cart-badge, .mobile-wishlist-badge { 
            position: absolute; top: -4px; right: -4px; 
            background: var(--brand-primary); color: white; 
            font-size: 10px; font-weight: 700; 
            min-width: 18px; height: 18px; 
            padding: 0 3px; 
            border-radius: 9px;
            display: flex; align-items: center; justify-content: center; 
            border: 2px solid var(--surface-card); 
            box-sizing: border-box;
        }

        /* --- MOBILE MENU DRAWER --- */
        .m-overlay { position: fixed; inset: 0; background: rgba(59, 11, 23, 0.3); backdrop-filter: blur(4px); opacity: 0; pointer-events: none; transition: opacity 0.25s ease-out; z-index: 2000; }
        .m-overlay.open { opacity: 1; pointer-events: auto; }
        .m-drawer { position: absolute; left: 0; top: 0; width: 320px; max-width: 90vw; height: 100%; background: var(--surface-card); display: flex; flex-direction: column; transform: translateX(-100%); transition: transform 0.25s ease-out; overflow-y: auto; box-shadow: 2px 0 20px rgba(59, 11, 23, 0.1); }
        .m-overlay.open .m-drawer { transform: translateX(0); }
        
        .m-drawer-header { height: 72px; min-height: 72px; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; background: var(--surface-card); position: relative; z-index: 10; }
        .m-drawer-logo { height: 50px; width: auto; object-fit: contain; display: block; }
        .m-drawer-close { width: 40px; height: 40px; border-radius: 10px; border: 1px solid var(--border-subtle); background: var(--surface-light); display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0; transition: all 0.2s ease; }
        .m-drawer-close:hover { background: var(--surface-hover); border-color: var(--brand-primary); }
        .m-drawer-close-icon { width: 14px; height: 14px; position: relative; }
        .m-drawer-close-icon::before, .m-drawer-close-icon::after { content: ""; position: absolute; inset: 0; margin: auto; width: 14px; height: 2px; border-radius: 999px; background: var(--text-primary); }
        .m-drawer-close-icon::before { transform: rotate(45deg); }
        .m-drawer-close-icon::after { transform: rotate(-45deg); }

        /* --- PREMIUM MOBILE MENU LINKS --- */
        .m-drawer-nav { padding: 24px 16px 10px; display: flex; flex-direction: column; flex: 1; overflow-y: auto; }
        
        /* Removed Borders from Nav Section */
        .nav-section { border: none; padding: 0; margin: 0; }

        .m-nav-link, .m-categories-toggle {
            display: flex; align-items: center; justify-content: space-between;
            height: 54px; 
            padding: 0 16px; margin-bottom: 8px;
            color: var(--text-primary); text-decoration: none;
            font-size: 16px; font-weight: 500;
            border-radius: 12px; 
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent; border: 1px solid transparent;
        }

        .m-link-content { display: flex; align-items: center; flex: 1; }
        .m-link-icon { width: 20px; height: 20px; margin-right: 14px; stroke: var(--text-light); transition: stroke 0.2s ease; }
        .m-link-arrow { width: 18px; height: 18px; stroke: var(--border-subtle); transition: all 0.2s ease; }

        .m-nav-link:hover, .m-categories-toggle:hover {
            background: var(--surface-hover);
            border-color: rgba(139, 38, 53, 0.05);
            transform: translateX(4px);
        }
        
        .m-nav-link:hover .m-link-icon, 
        .m-nav-link:hover .m-link-arrow,
        .m-categories-toggle:hover .m-link-icon,
        .m-categories-toggle:hover .chevron { stroke: var(--brand-primary); }

        .m-nav-link.active, .m-categories-toggle.active {
            background: linear-gradient(135deg, #fdf2f4 0%, #fff5f6 100%);
            color: var(--brand-primary);
            border-color: rgba(139, 38, 53, 0.1);
            font-weight: 600;
        }
        .m-nav-link.active .m-link-icon { stroke: var(--brand-primary); }

        .m-categories-dropdown { margin: 2px 0 8px; }
        .m-categories-toggle .chevron { width: 18px; height: 18px; stroke: var(--border-subtle); transition: transform 0.2s ease, stroke 0.2s ease; }
        .m-categories-toggle.active .chevron { stroke: var(--brand-primary); transform: rotate(90deg); }
        
        .m-categories-content { display: none; margin-left: 20px; padding-left: 16px; border-left: 2px solid var(--border-subtle); margin-top: 4px; margin-bottom: 12px; }
        .m-categories-content.show { display: block; animation: slideDown 0.2s ease-out; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .m-category-item { display: flex; align-items: center; height: 44px; padding: 0 16px; color: var(--text-secondary); text-decoration: none; font-size: 15px; font-weight: 400; border-radius: 8px; transition: all 0.15s ease; margin-bottom: 2px; }
        .m-category-item:hover { background: var(--surface-hover); color: var(--brand-primary); padding-left: 20px; }

        .m-drawer-profile { padding: 20px 24px; border-top: 1px solid var(--border-subtle); background: linear-gradient(135deg, var(--surface-light) 0%, var(--surface-hover) 100%); flex-shrink: 0; cursor: pointer; position: relative; }
        .m-profile-header { display: flex; align-items: center; gap: 12px; }
        .m-profile-icon-container { width: 48px; height: 48px; border-radius: 12px; border: 2px solid var(--border-subtle); background: var(--surface-card); box-shadow: 0 2px 8px rgba(59, 11, 23, 0.1); display: flex; align-items: center; justify-content: center; color: var(--text-primary); }
        .m-profile-info { flex: 1; }
        .m-profile-name { font-weight: 700; font-size: 16px; color: var(--text-primary); margin-bottom: 4px; }
        .m-profile-email { font-size: 14px; color: var(--text-light); }
        .m-login-text { font-weight: 600; color: var(--brand-primary); font-size: 16px; }

        .m-profile-popup-menu { position: absolute; bottom: 100%; left: 20px; right: 20px; background: var(--surface-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 8px; box-shadow: var(--shadow-modal); display: none; flex-direction: column; gap: 4px; margin-bottom: 12px; z-index: 200; }
        .m-profile-popup-menu.active { display: flex; animation: slideUpFade 0.2s ease-out; }
        @keyframes slideUpFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .m-profile-option { padding: 12px 16px; border-radius: 8px; font-size: 15px; font-weight: 500; color: var(--text-primary); text-decoration: none; display: flex; align-items: center; gap: 12px; transition: background 0.2s; }
        .m-profile-option:hover { background: var(--surface-hover); color: var(--brand-primary); }
        .m-profile-option svg { width: 18px; height: 18px; stroke: var(--text-primary); transition: stroke 0.2s; }
        .m-profile-option:hover svg { stroke: var(--brand-primary); }
        .m-profile-option.logout { color: #d33d49; }
        .m-profile-option.logout svg { stroke: #d33d49; }
        .m-profile-option.logout:hover { background: #fff1f2; }

        /* --- MOBILE SEARCH & CART DRAWER --- */
        .m-search-overlay { position: fixed; inset: 0; background: var(--surface-card); z-index: 4000; display: none; flex-direction: column; }
        .m-search-header { height: 72px; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; padding: 0 16px; gap: 12px; }
        .m-search-input { flex: 1; padding: 14px; border: 1px solid var(--border-subtle); border-radius: 10px; font-family: "DM Sans", sans-serif; font-size: 16px; color: var(--text-primary); outline: none; background: var(--surface-light); }
        .m-search-close { width: 40px; height: 40px; border-radius: 10px; border: 1px solid var(--border-subtle); background: var(--surface-light); display: flex; align-items: center; justify-content: center; cursor: pointer; }

        .cart-overlay { position: fixed; inset: 0; background: rgba(59, 11, 23, 0.3); backdrop-filter: blur(4px); opacity: 0; pointer-events: none; transition: opacity 0.25s ease-out; z-index: 3000; }
        .cart-overlay.open { opacity: 1; pointer-events: auto; }
        .cart-drawer { position: absolute; right: 0; top: 0; width: 380px; max-width: 90vw; height: 100%; background: var(--surface-card); display: flex; flex-direction: column; transform: translateX(100%); transition: transform 0.25s ease-out; overflow-y: auto; box-shadow: -2px 0 20px rgba(59, 11, 23, 0.1); }
        .cart-overlay.open .cart-drawer { transform: translateX(0); }
        
        .cart-drawer-header { height: 72px; min-height: 72px; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; background: var(--surface-card); flex-shrink: 0; }
        .cart-drawer-title { font-weight: 700; font-size: 18px; color: var(--text-primary); }
        
        .cart-drawer-body { flex: 1; overflow-y: auto; padding: 0; min-height: 300px; }
        .cart-drawer-footer { padding: 20px; border-top: 1px solid var(--border-subtle); background: var(--surface-card); box-shadow: 0 -2px 10px rgba(59, 11, 23, 0.05); flex-shrink: 0; }
        .mobile-cart-total { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
        .mobile-cart-total-label { font-weight: 600; font-size: 16px; color: var(--text-primary); }
        .mobile-cart-total-amount { font-weight: 700; font-size: 20px; color: var(--brand-primary); }
        .mobile-buy-btn { width: 100%; padding: 16px; background: var(--brand-gradient); color: white; border: none; border-radius: 10px; font-weight: 600; font-size: 16px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 10px; position: relative; overflow: hidden; }
        .mobile-buy-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(139, 38, 53, 0.3); }

        /* --- AUTH MODAL STYLES --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(40, 10, 15, 0.6); backdrop-filter: blur(6px);
            z-index: 5000; opacity: 0; visibility: hidden;
            transition: all 0.3s ease; display: flex;
            align-items: center; justify-content: center; padding: 16px;
        }

        .modal-overlay.active { opacity: 1; visibility: visible; }

        .login-container { 
            width: 100%; max-width: 400px; height: auto; max-height: 90vh;
            background-color: var(--surface-card); 
            display: flex; flex-direction: column; position: relative;
            border-radius: 16px; box-shadow: var(--shadow-modal);
            overflow: hidden; transform: scale(0.95); opacity: 0;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .modal-overlay.active .login-container { transform: scale(1); opacity: 1; }
        .login-container::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: var(--brand-gradient); z-index: 10; }

        .modal-close-btn { 
            position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; 
            border-radius: 10px; border: 1px solid var(--border-subtle); 
            background: var(--surface-light); display: flex; 
            align-items: center; justify-content: center; cursor: pointer; 
            flex-shrink: 0; transition: all 0.2s ease; z-index: 50;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .modal-close-btn:hover { background: var(--surface-hover); border-color: var(--brand-primary); }
        .close-icon-lines { width: 14px; height: 14px; position: relative; }
        .close-icon-lines::before, .close-icon-lines::after { content: ""; position: absolute; inset: 0; margin: auto; width: 14px; height: 2px; border-radius: 999px; background: var(--text-primary); }
        .close-icon-lines::before { transform: rotate(45deg); }
        .close-icon-lines::after { transform: rotate(-45deg); }

        .info-panel { display: none; }
        .form-panel-wrapper { flex-grow: 1; position: relative; display: flex; flex-direction: column; overflow-y: auto; padding: 80px 24px 30px; }
        #auth-section { display: flex; flex-direction: column; width: 100%; }

        .form-toggle { display: flex; justify-content: center; background-color: var(--surface-light); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 4px; margin-bottom: 24px; flex-shrink: 0; }
        .toggle-btn { width: 50%; padding: 10px; border: none; background-color: transparent; color: var(--text-light); font-size: 14px; font-family: "DM Sans", sans-serif; font-weight: 600; border-radius: 9px; cursor: pointer; transition: all 0.3s ease; }
        .toggle-btn.active { background-color: var(--brand-primary); color: #fff; box-shadow: 0 4px 10px rgba(139, 38, 53, 0.2); }
        
        .form-container form { display: none; animation: fadeIn 0.4s ease; }
        .form-container form.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .form-header { text-align: center; margin-bottom: 24px; }
        .form-header h2 { font-family: "Cormorant Garamond", serif; font-size: 28px; font-weight: 600; margin-bottom: 6px; color: var(--brand-primary); }
        .form-header p { color: var(--text-secondary); font-size: 14px; font-weight: 400; }
        
        .input-group { margin-bottom: 14px; }
        .input-group label { display: block; font-size: 12px; font-weight: 600; margin-bottom: 6px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
        .input-group input { width: 100%; padding: 12px 14px; border: 1px solid var(--border-subtle); background-color: var(--surface-light); border-radius: 10px; font-size: 15px; font-family: 'DM Sans', sans-serif; color: var(--text-primary); transition: all 0.2s ease; outline: none; }
        .input-group input:focus { border-color: var(--brand-primary); background-color: #fff; box-shadow: 0 0 0 3px rgba(139, 38, 53, 0.1); }
        
        /* PASSWORD TOGGLE STYLES */
        .password-wrapper { position: relative; width: 100%; }
        .password-toggle-icon { position: absolute; right: 14px; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--text-light); transition: color 0.2s; }
        .password-toggle-icon:hover { color: var(--brand-primary); }

        .btn-submit { width: 100%; padding: 14px; font-size: 15px; font-weight: 600; color: #fff; background: var(--brand-gradient); border: none; border-radius: 10px; cursor: pointer; margin-top: 8px; font-family: 'DM Sans', sans-serif; transition: all 0.3s ease; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(139, 38, 53, 0.3); }
        
        .divider { display: flex; align-items: center; text-align: center; color: var(--text-light); margin: 20px 0; font-size: 11px; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }
        .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid var(--border-subtle); }
        .divider:not(:empty)::before { margin-right: 1em; }
        .divider:not(:empty)::after { margin-left: 1em; }
        
        .btn-google { width: 100%; padding: 12px; font-size: 14px; font-weight: 500; color: var(--text-primary); background-color: #fff; border: 1px solid var(--border-subtle); border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; font-family: 'DM Sans', sans-serif; }
        .btn-google:hover { background-color: var(--surface-hover); border-color: var(--brand-primary); }
        .google-icon { width: 18px; height: 18px; margin-right: 10px; }
        
        .switch-form-text { text-align: center; margin-top: 20px; font-size: 14px; color: var(--text-secondary); }
        .switch-form-text a { color: var(--brand-primary); font-weight: 700; text-decoration: none; cursor: pointer; transition: color 0.2s; }
        .switch-form-text a:hover { color: var(--brand-secondary); text-decoration: underline; }

        /* Desktop Specific Styles for Modal */
        @media (min-width: 992px) {
            .login-container { flex-direction: row; max-width: 1100px; height: 680px; overflow: hidden; }
            .login-container::before { display: none; } 
            .info-panel { display: flex; flex-direction: column; justify-content: flex-end; flex-basis: 50%; background: linear-gradient(to top, rgba(12, 31, 26, 0.95) 0%, rgba(12, 31, 26, 0.6) 50%, rgba(12, 31, 26, 0.2) 100%), url('https://images.unsplash.com/photo-1583391733958-e026b14b3082?q=80&w=2068&auto=format&fit=crop') center top / cover; padding: 3.5rem; color: #fff; position: relative; }
            .info-panel::after { content: ''; position: absolute; top: 24px; left: 24px; right: 24px; bottom: 24px; border: 1px solid rgba(230, 210, 169, 0.4); border-radius: 12px; pointer-events: none; }
            .info-panel-header { position: absolute; top: 3.5rem; left: 3.5rem; font-family: "Cormorant Garamond", serif; font-size: 1.8rem; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: #ffecd1; text-shadow: 0 4px 15px rgba(0,0,0,0.6); }
            .info-panel-text h2 { font-family: "Cormorant Garamond", serif; font-size: 3.2rem; font-weight: 500; line-height: 1.1; margin-bottom: 1.2rem; color: #fefcf3; }
            .info-panel-text p { font-size: 1.05rem; max-width: 420px; line-height: 1.6; opacity: 0.95; color: #d1e0db; font-weight: 300; }
            .form-panel-wrapper { flex-basis: 50%; align-items: center; justify-content: center; padding: 40px; scrollbar-width: none; -ms-overflow-style: none; }
            .form-panel-wrapper::-webkit-scrollbar { display: none; }
            #auth-section { max-width: 380px; padding: 0; }
            .form-header { margin-bottom: 20px; }
            .form-header h2 { font-size: 2.2rem; }
            .form-toggle { margin-bottom: 20px; }
        }
        
        #loader { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(254, 252, 243, 0.8); justify-content: center; align-items: center; z-index: 60; backdrop-filter: blur(5px); }
        .spinner { width: 40px; height: 40px; border: 3px solid rgba(139, 38, 53, 0.15); border-top-color: var(--brand-primary); border-radius: 50%; animation: rotation 0.8s linear infinite; }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Helpers */
        .auth-hidden { display: none !important; }

        @media (max-width: 1024px) {
            .d-nav-links { gap: 20px; margin: 0 20px; }
            .d-search-container { max-width: 300px; }
        }

        @media (max-width: 768px) {
            .page-desktop { display: none; }
            .page-mobile  { display: flex; }
            .d-navbar-container { padding: 0 20px; }
            .cart-popup { width: 350px; }
        }
        
        /* Toast Container */
        #toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 6000; pointer-events: none; display: flex; flex-direction: column; gap: 10px; }
        .toast { padding: 1rem 1.5rem; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); animation: slideUp 0.3s ease; display: flex; align-items: center; gap: 1rem; border-left: 4px solid #8b2635; min-width: 300px; pointer-events: auto; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- TERMS AND CONDITIONS PAGE STYLES --- */
        /* --- CSS VARIABLES --- */
        .terms-conditions-root {
            --bg-color: #FDFBF7;       
            --card-bg: #FFFFFF;        
            --primary-color: #7A1E26;  /* Deep Maroon */
            --accent-gold: #C5A059;    /* Gold accent for bullets */
            --text-dark: #2C2C2C;      
            --text-body: #555555;
            --highlight-bg: #FFF0F0;   /* Light red for warnings */
        }

        /* --- GLOBAL STYLES --- */
        .terms-conditions-container * { margin: 0; padding: 0; box-sizing: border-box; }

        .terms-conditions-container {
            font-family: 'Lato', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-body);
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            margin-top: var(--header-height-desktop);
        }

        @media (max-width: 768px) {
            .terms-conditions-container {
                margin-top: var(--navbar-height-mobile);
            }
        }

        /* Custom Scrollbar */
        .terms-conditions-container ::-webkit-scrollbar { width: 8px; }
        .terms-conditions-container ::-webkit-scrollbar-track { background: #f1f1f1; }
        .terms-conditions-container ::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 4px; }

        .terms-conditions-container h1, 
        .terms-conditions-container h2, 
        .terms-conditions-container h3 {
            font-family: 'Playfair Display', serif;
            color: var(--text-dark);
        }

        /* --- CONTAINER --- */
        .terms-conditions-container .container {
            max-width: 850px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        /* --- BRANDING HEADER --- */
        .terms-conditions-container .brand-header {
            text-align: center;
            margin-bottom: 50px;
            opacity: 0;
            animation: fadeIn 1.2s ease-out forwards;
            padding: 0 10px;
        }

        .terms-conditions-container .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 2px;
            text-decoration: none;
            display: inline-block;
            border-bottom: 2px solid transparent;
            transition: 0.3s;
            max-width: 100%;
        }

        .terms-conditions-container .logo-text:hover { border-bottom-color: var(--accent-gold); }

        /* --- CARD DESIGN --- */
        .terms-conditions-container .policy-card {
            background: var(--card-bg);
            padding: 80px 70px;
            border-radius: 4px;
            box-shadow: 0 20px 40px rgba(122, 30, 38, 0.05); 
            border: 1px solid rgba(0,0,0,0.03);
            position: relative;
        }

        /* --- TYPOGRAPHY & SECTIONS --- */
        .terms-conditions-container .page-intro {
            margin-bottom: 60px;
            border-bottom: 1px solid #eee;
            padding-bottom: 40px;
            text-align: center;
        }

        .terms-conditions-container .page-intro h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        /* --- DATE BADGE STYLING --- */
        .terms-conditions-container .date-badge {
            display: inline-block;
            background-color: #F5F5F5;
            color: #666;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 8px 20px;
            border-radius: 50px;
            margin-bottom: 35px;
            font-family: 'Lato', sans-serif;
        }

        /* Intro paragraph text alignment fix */
        .terms-conditions-container .page-intro p:not(.date-badge) {
            text-align: left;
            margin-bottom: 15px;
            font-size: 1.1rem; 
        }

        .terms-conditions-container .section {
            margin-bottom: 50px;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .terms-conditions-container .section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .terms-conditions-container .section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            border-left: 3px solid var(--primary-color);
            padding-left: 15px;
        }

        .terms-conditions-container .section h3 {
            font-size: 1.2rem;
            margin-top: 25px;
            margin-bottom: 15px;
            font-weight: 600;
            color: #444;
        }

        .terms-conditions-container p { margin-bottom: 15px; font-weight: 300; font-size: 1.05rem;}

        /* --- LIST STYLING --- */
        .terms-conditions-container ul { list-style: none; margin-bottom: 20px; padding-left: 10px; }
        .terms-conditions-container ul li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
            font-size: 1.05rem;
            font-weight: 300;
        }
        .terms-conditions-container ul li::before {
            content: 'â€¢';
            color: var(--accent-gold);
            font-size: 20px;
            position: absolute;
            left: 0;
            top: -4px;
        }

        /* --- HIGHLIGHT BOX --- */
        .terms-conditions-container .highlight-box {
            background-color: var(--highlight-bg);
            border-left: 4px solid #D64545;
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
            border-radius: 0 4px 4px 0;
        }
        .terms-conditions-container .highlight-box strong { color: #D64545; font-family: 'Playfair Display', serif; }

        /* --- LINKS --- */
        .terms-conditions-container a {
            color: var(--primary-color);
            text-decoration: none;
            transition: 0.3s;
            border-bottom: 1px dotted var(--primary-color);
        }
        .terms-conditions-container a:hover { border-bottom-style: solid; }

        /* --- FOOTER --- */
        .terms-conditions-container footer {
            text-align: center;
            padding: 40px 0;
            font-size: 0.85rem;
            color: #999;
            opacity: 0;
            animation: fadeIn 2s ease-out 1s forwards;
        }

        @keyframes fadeIn { to { opacity: 1; } }

        /* --- RESPONSIVE ADJUSTMENTS --- */
        @media (max-width: 768px) {
            
            /* LOGO FIX FOR MOBILE */
            .terms-conditions-container .logo-text {
                font-size: 1.4rem; 
                line-height: 1.2;
                word-wrap: break-word; 
            }

            .terms-conditions-container .container { padding: 30px 15px; }
            .terms-conditions-container .policy-card { padding: 40px 25px; }
            
            .terms-conditions-container .page-intro h1 { 
                font-size: 1.8rem;
                line-height: 1.3;
                padding: 0 5px;
            }
            
            .terms-conditions-container .page-intro p:not(.date-badge) { 
                font-size: 0.95rem; 
                line-height: 1.6;
                text-align: left;
            }

            .terms-conditions-container p, 
            .terms-conditions-container ul li { font-size: 0.95rem; }
            .terms-conditions-container .section h2 { font-size: 1.3rem; }
        }
        
        @media (max-width: 380px) {
             .terms-conditions-container .logo-text { font-size: 1.2rem; } 
        }
    </style>
</head>
<body>
    <!-- DESKTOP NAVBAR STRUCTURE -->
    <div class="page-desktop">
        <nav class="d-navbar">
            <div class="d-navbar-container">
                <img class="d-navbar-logo" src="https://product-ecommerces.netlify.app/vastramaya.png" alt="Vastramaya Logo" onclick="window.location.href='index.html'" />
                <div class="d-nav-links">
                    <a href="index.html" class="d-nav-link">Home</a>
                    <a href="shop.html" class="d-nav-link">Shop</a>
                    <div class="d-categories-dropdown">
                        <a href="shop.html" class="d-nav-link">Categories</a>
                        <div class="d-categories-content" id="desktop-nav-categories">
                            <!-- Populated via Firebase -->
                        </div>
                    </div>
                </div>
                <div class="d-search-container">
                    <svg class="d-search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                    <input type="text" class="d-search-bar" placeholder="Search products..." id="desktop-search">
                </div>
                <div class="d-action-icons">
                    <a href="wishlist.html" class="d-icon-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"/></svg>
                        <span class="wishlist-badge" id="wishlist-badge-desktop" style="display:none">0</span>
                    </a>
                    
                    <!-- CART TOGGLE & POPUP -->
                    <div class="d-profile-dropdown">
                        <button class="d-icon-btn" id="d-cart-toggle">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 10a4 4 0 0 1-8 0"/><path d="M3.103 6.034h17.794"/><path d="M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"/></svg>
                            <span class="cart-badge" id="cart-badge-desktop" style="display:none">0</span>
                        </button>
                        <div class="cart-popup" id="cart-popup">
                            <div class="cart-popup-header">
                                <div class="cart-popup-title">Your Shopping Cart</div>
                                <div class="cart-popup-subtitle" id="cart-count-desktop">0 items</div>
                            </div>
                            <div class="cart-popup-body" id="cart-items-desktop"></div>
                            <div class="cart-popup-footer">
                                <div class="cart-total">
                                    <div class="cart-total-label">Total Amount</div>
                                    <div class="cart-total-amount" id="cart-total-desktop">$0.00</div>
                                </div>
                                <button class="buy-btn" onclick="window.location.href='checkout.html'">
                                    <span>Checkout Now</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- PROFILE DROPDOWN (SVG Icon) -->
                    <div class="d-profile-dropdown">
                        <button class="d-profile-btn" id="d-profile-toggle">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-icon lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        </button>
                        <div class="profile-popup" id="profile-popup">
                            <div class="profile-header">
                                <div class="profile-info">
                                    <div class="profile-name" id="user-name">Guest User</div>
                                    <div class="profile-email" id="user-email">Sign in to sync</div>
                                </div>
                            </div>
                            <div class="profile-links" id="profile-links-container">
                                <a href="my-profile.html" class="profile-link auth-only auth-hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                    My Profile
                                </a>
                                <a href="my-orders.html" class="profile-link auth-only auth-hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22v-9"/></svg>
                                    My Orders
                                </a>
                                <div id="login-trigger-desktop" class="profile-link">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" x2="3" y1="12" y2="12"/></svg>
                                    Sign In
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <!-- MOBILE NAVBAR STRUCTURE -->
    <div class="page-mobile">
        <nav class="m-navbar">
            <button class="m-menu-btn" id="m-menu-toggle"><div class="m-menu-lines"><span></span></div></button>
            <img class="m-logo" src="https://product-ecommerces.netlify.app/vastramaya.png" alt="Vastramaya Logo" onclick="window.location.href='index.html'" />
            <div class="m-right-icons">
                <button class="m-icon-btn" id="m-search-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                </button>
                <button class="m-icon-btn" id="m-cart-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 10a4 4 0 0 1-8 0"/><path d="M3.103 6.034h17.794"/><path d="M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"/></svg>
                    <span class="mobile-cart-badge" id="cart-badge-mobile" style="display:none">0</span>
                </button>
            </div>
        </nav>

        <!-- MOBILE MENU DRAWER -->
        <div class="m-overlay" id="m-overlay">
            <div class="m-drawer">
                <div class="m-drawer-header">
                    <img class="m-drawer-logo" src="https://product-ecommerces.netlify.app/vastramaya.png" alt="Logo" />
                    <button class="m-drawer-close" id="m-drawer-close"><div class="m-drawer-close-icon"></div></button>
                </div>
                <nav class="m-drawer-nav">
                    <!-- SINGLE NAV SECTION WITH NO BORDERS -->
                    <div class="nav-section">
                        <a href="index.html" class="m-nav-link">
                            <div class="m-link-content">
                                <svg class="m-link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                                <span>Home</span>
                            </div>
                            <svg class="m-link-arrow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                        </a>
                        
                        <a href="shop.html" class="m-nav-link">
                            <div class="m-link-content">
                                <svg class="m-link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
                                <span>Shop</span>
                            </div>
                            <svg class="m-link-arrow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                        </a>

                        <div class="m-categories-dropdown">
                            <div class="m-categories-toggle" id="m-categories-toggle">
                                <div class="m-link-content">
                                    <svg class="m-link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>
                                    <span>Categories</span>
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron"><path d="m9 18 6-6-6-6"/></svg>
                            </div>
                            <div class="m-categories-content" id="mobile-nav-categories">
                                <!-- Populated via Firebase -->
                            </div>
                        </div>

                        <!-- MOVED WISHLIST & ORDERS HERE (Consolidated Layout) -->
                        <a href="wishlist.html" class="m-nav-link">
                            <div class="m-link-content">
                                <svg class="m-link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                                Wishlist 
                                <span class="mobile-wishlist-badge" id="wishlist-badge-mobile" style="display:none; position:relative; top:0; right:0; margin-left:8px;">0</span>
                            </div>
                            <svg class="m-link-arrow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                        </a>
                         
                        <a href="my-orders.html" class="m-nav-link auth-only auth-hidden">
                            <div class="m-link-content">
                                <svg class="m-link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22v-9"/></svg>
                                <span>My Orders</span>
                            </div>
                            <svg class="m-link-arrow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                        </a>
                    </div>
                </nav>
                <div class="m-drawer-profile" id="mobile-profile-trigger">
                    <div class="m-profile-popup-menu" id="m-profile-popup">
                         <a href="my-profile.html" class="m-profile-option">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                             My Profile
                         </a>
                         <div class="m-profile-option logout" id="mobile-logout-btn">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
                             Logout
                         </div>
                    </div>
                    <div class="m-profile-header">
                        <div class="m-profile-icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        </div>
                        <div class="m-profile-info">
                            <div class="m-profile-name" id="user-name-mobile">Guest</div>
                            <div class="m-profile-email" id="user-phone-mobile"><span class="m-login-text">Login / Sign Up</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MOBILE CART DRAWER -->
        <div class="cart-overlay" id="cart-overlay">
            <div class="cart-drawer">
                <div class="cart-drawer-header">
                    <div class="cart-drawer-title" id="cart-count-mobile">Your Cart (0)</div>
                    <button class="m-drawer-close" id="cart-drawer-close">
                        <div class="m-drawer-close-icon"></div>
                    </button>
                </div>
                <div class="cart-drawer-body" id="cart-items-mobile"></div>
                <div class="cart-drawer-footer">
                    <div class="mobile-cart-total">
                        <div class="mobile-cart-total-label">Total</div>
                        <div class="mobile-cart-total-amount" id="cart-total-mobile">$0.00</div>
                    </div>
                    <button class="mobile-buy-btn" onclick="window.location.href='checkout.html'">
                        <span>Checkout Now</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- MOBILE SEARCH OVERLAY -->
        <div class="m-search-overlay" id="m-search-overlay">
            <div class="m-search-header">
                <input type="text" class="m-search-input" placeholder="Search products..." id="mobile-search">
                <button class="m-search-close" id="m-search-close">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- NEW LOGIN/SIGNUP MODAL -->
    <div class="modal-overlay" id="login-modal-overlay">
        
        <div class="login-container">
            <!-- Close Button -->
            <button class="modal-close-btn" id="close-modal-btn">
                <div class="close-icon-lines"></div>
            </button>

            <!-- Visual Panel (Desktop Only) -->
            <div class="info-panel">
                <div class="info-panel-header">Vastramaya</div>
                <div class="info-panel-text">
                    <h2>Heritage meets Elegance.</h2>
                    <p>Sign in to access exclusive collections, personalized styling, and manage your bespoke orders.</p>
                </div>
            </div>

            <!-- Form Panel -->
            <div class="form-panel-wrapper">
                <div id="loader"><div class="spinner"></div></div>

                <div id="auth-section">
                    <div class="form-toggle">
                        <button id="show-login-btn" class="toggle-btn active">Sign In</button>
                        <button id="show-signup-btn" class="toggle-btn">Sign Up</button>
                    </div>
                    
                    <div class="form-container">
                        <!-- Login Form -->
                        <form id="login-form" class="active">
                            <div class="form-header">
                                <h2>Welcome Back</h2>
                                <p>Please enter your details to sign in.</p>
                            </div>
                            <div class="input-group">
                                <label for="login-email">Email Address</label>
                                <input type="email" id="login-email" placeholder="john@example.com" required>
                            </div>
                            <div class="input-group">
                                <label for="login-password">Password</label>
                                <div class="password-wrapper">
                                    <input type="password" id="login-password" placeholder="Enter your password" required>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="password-toggle-icon" onclick="togglePassword('login-password', this)"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                                </div>
                            </div>
                            
                            <button type="submit" id="login-btn" class="btn-submit">Sign In</button>
                            
                            <div class="divider">Or continue with</div>
                            
                            <button type="button" class="btn-google" id="google-login-btn">
                                <svg class="google-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.655-3.344-11.303-7.962l-6.571,4.819C9.656,40.909,16.318,44,24,44z"></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.089,5.571l6.19,5.238C42.012,36.494,44,30.638,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path></svg>
                                Sign in with Google
                            </button>
                            
                            <p class="switch-form-text">
                                New to Vastramaya? <a class="switch-to-signup">Create Account</a>
                            </p>
                        </form>

                        <!-- Signup Form -->
                        <form id="signup-form">
                            <div class="form-header">
                                <h2>Join Vastramaya</h2>
                                <p>Register to explore our exclusive collections.</p>
                            </div>
                            <div class="input-group">
                                <label for="signup-name">Full Name</label>
                                <input type="text" id="signup-name" placeholder="John Doe" required>
                            </div>
                            <div class="input-group">
                                <label for="signup-email">Email Address</label>
                                <input type="email" id="signup-email" placeholder="john@example.com" required>
                            </div>
                            <div class="input-group">
                                <label for="signup-password">Password</label>
                                <div class="password-wrapper">
                                    <input type="password" id="signup-password" placeholder="Create a password" required>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="password-toggle-icon" onclick="togglePassword('signup-password', this)"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                                </div>
                            </div>
                            
                            <button type="submit" id="signup-btn" class="btn-submit">Create Account</button>
                            
                            <p class="switch-form-text">
                                Already a member? <a class="switch-to-login">Sign In</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="toast-container"></div>

    <!-- TERMS AND CONDITIONS CONTENT -->
    <div class="terms-conditions-container">
        <div class="container">
            
            <!-- Branding -->
            <div class="brand-header">
                <a href="index.html" class="logo-text">Vastramayamagic.in</a>
            </div>

            <!-- Content Card -->
            <div class="policy-card">
                
                <div class="page-intro section">
                    <h1>Terms and Conditions</h1>
                    
                    <!-- Date Badge -->
                    <span class="date-badge">Last Updated: 14 December 2025</span>

                    <p>Welcome to Vastramayamagic.in ("we", "our", "us").</p>
                    <p>These Terms and Conditions govern your use of our website and the purchase of products from our platform. By accessing or using Vastramayamagic.in, you agree to be bound by these Terms.</p>
                    
                    <div class="highlight-box">
                        <strong>If you do not agree with any part of these Terms, please do not use our website.</strong>
                    </div>
                </div>

                <!-- 1. About Us -->
                <div class="section">
                    <h2>1. About Us</h2>
                    <p>Vastramayamagic.in is an Indian e-commerce platform offering traditional and vintage Indian clothing. We sell and ship products within India only.</p>
                </div>

                <!-- 2. Eligibility -->
                <div class="section">
                    <h2>2. Eligibility to Use the Website</h2>
                    <p>By using this website, you confirm that:</p>
                    <ul>
                        <li>You are at least 18 years of age, or</li>
                        <li>You are using the website under the supervision of a parent or legal guardian</li>
                        <li>You agree to provide accurate and complete information when placing an order or contacting us.</li>
                    </ul>
                </div>

                <!-- 3. Products and Availability -->
                <div class="section">
                    <h2>3. Products and Availability</h2>
                    <ul>
                        <li>All products displayed on the website are subject to availability.</li>
                        <li>We reserve the right to limit quantities, discontinue products, or modify product details without prior notice.</li>
                        <li>Product images are for representation purposes only. Slight variations in color, texture, or design may occur due to lighting, screen resolution, or handcrafted nature of products.</li>
                    </ul>
                </div>

                <!-- 4. Pricing and Payment -->
                <div class="section">
                    <h2>4. Pricing and Payment</h2>
                    <ul>
                        <li>All prices listed on the website are in Indian Rupees (INR) and inclusive of applicable taxes unless stated otherwise.</li>
                        <li>We reserve the right to change prices at any time without prior notice.</li>
                        <li>Payments are processed securely through Razorpay.</li>
                        <li>We do not store or have access to your payment details such as card numbers or UPI PINs.</li>
                        <li>An order will be considered confirmed only after successful payment.</li>
                    </ul>
                </div>

                <!-- 5. Order Confirmation and Cancellation -->
                <div class="section">
                    <h2>5. Order Confirmation and Cancellation</h2>
                    <p>Once an order is placed, you will receive an order confirmation via email or SMS.</p>
                    <p>We reserve the right to cancel or refuse any order due to reasons including but not limited to:</p>
                    <ul>
                        <li>Product unavailability</li>
                        <li>Pricing or listing errors</li>
                        <li>Suspected fraudulent activity</li>
                    </ul>
                    <p>If payment has been made and the order is cancelled, a refund will be processed as per our Refund Policy.</p>
                </div>

                <!-- 6. Shipping -->
                <div class="section">
                    <h2>6. Shipping</h2>
                    <ul>
                        <li>We deliver products within India only.</li>
                        <li>Estimated delivery timelines are indicative and may vary due to logistics, location, or unforeseen circumstances.</li>
                        <li>We are not responsible for delays caused by courier partners, natural events, or government restrictions.</li>
                    </ul>
                </div>

                <!-- 7. Returns, Refunds, and Replacements -->
                <div class="section">
                    <h2>7. Returns, Refunds, and Replacements</h2>
                    <p>All returns, refunds, and replacements are governed by our Refund & Return Policy, which forms an integral part of these Terms.</p>
                    <p>Please review the policy before making a purchase.</p>
                </div>

                <!-- 8. Intellectual Property -->
                <div class="section">
                    <h2>8. Intellectual Property</h2>
                    <p>All content on this website, including logos, designs, images, text, graphics, and website layout, is the intellectual property of Vastramayamagic.in.</p>
                    <ul>
                        <li>You may not copy, reproduce, distribute, or use any content without prior written permission.</li>
                        <li>Unauthorized use may result in legal action.</li>
                    </ul>
                </div>

                <!-- 9. User Conduct -->
                <div class="section">
                    <h2>9. User Conduct</h2>
                    <p>You agree not to:</p>
                    <ul>
                        <li>Use the website for unlawful purposes</li>
                        <li>Attempt to gain unauthorized access to the website or servers</li>
                        <li>Upload or transmit malicious code, viruses, or harmful content</li>
                        <li>Provide false or misleading information</li>
                    </ul>
                    <p>We reserve the right to restrict or terminate access if these Terms are violated.</p>
                </div>

                <!-- 10. Limitation of Liability -->
                <div class="section">
                    <h2>10. Limitation of Liability</h2>
                    <p>To the maximum extent permitted by Indian law:</p>
                    <ul>
                        <li>Vastramayamagic.in shall not be liable for any indirect, incidental, or consequential damages arising from the use of the website or products purchased.</li>
                        <li>Our total liability, if any, shall not exceed the amount paid by you for the product.</li>
                    </ul>
                </div>

                <!-- 11. Indemnification -->
                <div class="section">
                    <h2>11. Indemnification</h2>
                    <p>You agree to indemnify and hold harmless Vastramayamagic.in from any claims, losses, damages, or expenses arising out of:</p>
                    <ul>
                        <li>Your misuse of the website</li>
                        <li>Violation of these Terms</li>
                        <li>Breach of applicable laws</li>
                    </ul>
                </div>

                <!-- 12. Third-Party Services -->
                <div class="section">
                    <h2>12. Third-Party Services</h2>
                    <p>Our website may contain links or integrations with third-party services, including payment gateways and delivery partners. We are not responsible for the content, policies, or practices of third-party websites.</p>
                </div>

                <!-- 13. Termination -->
                <div class="section">
                    <h2>13. Termination</h2>
                    <p>We reserve the right to suspend or terminate access to our website at any time without prior notice if these Terms are violated.</p>
                </div>

                <!-- 14. Governing Law and Jurisdiction -->
                <div class="section">
                    <h2>14. Governing Law and Jurisdiction</h2>
                    <p>These Terms shall be governed by and interpreted in accordance with the laws of India. Any disputes shall be subject to the exclusive jurisdiction of the courts in India.</p>
                </div>

                <!-- 15. Changes to Terms -->
                <div class="section">
                    <h2>15. Changes to Terms</h2>
                    <p>We may update these Terms and Conditions from time to time. Any changes will be effective immediately upon posting on the website.</p>
                    <p>We encourage you to review this page periodically.</p>
                </div>

                <!-- 16. Contact Information -->
                <div class="section">
                    <h2>16. Contact Information</h2>
                    <p>For any questions or concerns regarding these Terms, please contact us:</p>
                    <p>
                        <strong>Website:</strong> <a href="https://vastramayamagic.in">https://vastramayamagic.in</a><br>
                        <strong>Email:</strong> <a href="mailto:vastramayamagic@gmail.com">vastramayamagic@gmail.com</a><br>
                        <strong>Phone:</strong> +91 86394 78312
                    </p>
                </div>

            </div>

            <footer>
                &copy; 2025 Vastramayamagic.in. All Rights Reserved.
            </footer>
        </div>
    </div>

    <!-- Script for Scroll Animation -->
    <script>
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        const sections = document.querySelectorAll('.section');
        sections.forEach(section => {
            observer.observe(section);
        });
    </script>

    <!-- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyCdeonH3VytC21F3X6x0rCVCn2xXrGPoug",
            authDomain: "vastramaya---magic.firebaseapp.com",
            projectId: "vastramaya---magic",
            storageBucket: "vastramaya---magic.firebasestorage.app",
            messagingSenderId: "543460072082",
            appId: "1:543460072082:web:f3d1140e8f81ad338ae44b",
            measurementId: "G-E39VNDCFVE"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // STATE
        let cart = JSON.parse(localStorage.getItem('vastramaya_cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('vastramaya_wishlist')) || [];
        let currentUser = null;

        // INITIALIZATION
        document.addEventListener('DOMContentLoaded', () => {
            initNavbarUI();
            checkAuth();
            renderCart();
            updateWishlistCount(); // Initialize wishlist count
            loadCategories();
            initSearch();
            initAuthModal();
        });

        // WISHLIST LOGIC
        function updateWishlistCount() {
            const count = wishlist.length;
            const dBadge = document.getElementById('wishlist-badge-desktop');
            const mBadge = document.getElementById('wishlist-badge-mobile');

            // Update Desktop Badge
            if (dBadge) {
                dBadge.textContent = count;
                dBadge.style.display = count > 0 ? 'flex' : 'none';
            }

            // Update Mobile Badge
            if (mBadge) {
                mBadge.textContent = count;
                mBadge.style.display = count > 0 ? 'flex' : 'none';
            }
        }

        async function syncWishlistToFirestore() {
            if (!currentUser) return;
            try {
                const doc = await db.collection('users').doc(currentUser.uid).get();
                if (doc.exists && doc.data().wishlist) {
                    if (wishlist.length === 0) {
                        // If local empty, load from DB
                        wishlist = doc.data().wishlist;
                        localStorage.setItem('vastramaya_wishlist', JSON.stringify(wishlist));
                        updateWishlistCount();
                    } else {
                        // Merge logic
                        const dbWishlist = doc.data().wishlist || [];
                        const mergedIds = new Set([...wishlist.map(i=>i.id), ...dbWishlist.map(i=>i.id)]);
                        
                        const mergedList = [];
                        mergedIds.forEach(id => {
                            let item = dbWishlist.find(i => i.id === id) || wishlist.find(i => i.id === id);
                            if(item) mergedList.push(item);
                        });
                        
                        wishlist = mergedList;
                        localStorage.setItem('vastramaya_wishlist', JSON.stringify(wishlist));
                        
                        // Update DB with merged
                        db.collection('users').doc(currentUser.uid).update({
                            wishlist: wishlist
                        });
                        updateWishlistCount();
                    }
                } else if (wishlist.length > 0) {
                    // Save local to DB if DB is empty
                    db.collection('users').doc(currentUser.uid).set({
                        wishlist: wishlist
                    }, { merge: true });
                }
            } catch (e) { console.error("Sync wishlist error", e); }
        }

        // AUTH MODAL LOGIC
        function initAuthModal() {
            const modalOverlay = document.getElementById('login-modal-overlay');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const showLoginBtn = document.getElementById('show-login-btn');
            const showSignupBtn = document.getElementById('show-signup-btn');
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            
            // Switch to Login View
            const goToLogin = () => {
                signupForm.classList.remove('active');
                showSignupBtn.classList.remove('active');
                loginForm.classList.add('active');
                showLoginBtn.classList.add('active');
            };
            
            // Switch to Signup View
            const goToSignup = () => {
                loginForm.classList.remove('active');
                showLoginBtn.classList.remove('active');
                signupForm.classList.add('active');
                showSignupBtn.classList.add('active');
            };

            // Event Listeners for switching
            showLoginBtn.addEventListener('click', goToLogin);
            showSignupBtn.addEventListener('click', goToSignup);
            document.querySelectorAll('.switch-to-login').forEach(el => el.addEventListener('click', goToLogin));
            document.querySelectorAll('.switch-to-signup').forEach(el => el.addEventListener('click', goToSignup));

            // Close Modal
            closeModalBtn.addEventListener('click', () => {
                modalOverlay.classList.remove('active');
                document.body.style.overflow = '';
            });
            
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    modalOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });

            // Handle Login Submission
            document.getElementById('login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const pass = document.getElementById('login-password').value;
                const btn = document.getElementById('login-btn');
                
                document.getElementById('loader').style.display = 'flex';
                
                auth.signInWithEmailAndPassword(email, pass)
                    .then(() => {
                        document.getElementById('loader').style.display = 'none';
                        showToast("Login Successful!");
                        modalOverlay.classList.remove('active');
                    })
                    .catch((error) => {
                        document.getElementById('loader').style.display = 'none';
                        showToast(error.message);
                    });
            });

            // Handle Signup Submission
            document.getElementById('signup-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('signup-name').value;
                const email = document.getElementById('signup-email').value;
                const pass = document.getElementById('signup-password').value;
                
                document.getElementById('loader').style.display = 'flex';
                
                auth.createUserWithEmailAndPassword(email, pass)
                    .then((userCredential) => {
                        // Update display name
                        return userCredential.user.updateProfile({ displayName: name })
                        .then(() => {
                             // Save to Firestore
                             return db.collection('users').doc(userCredential.user.uid).set({
                                name: name,
                                email: email,
                                createdAt: firebase.firestore.FieldValue.serverTimestamp()
                             });
                        });
                    })
                    .then(() => {
                        document.getElementById('loader').style.display = 'none';
                        showToast("Account Created!");
                        modalOverlay.classList.remove('active');
                    })
                    .catch((error) => {
                        document.getElementById('loader').style.display = 'none';
                        showToast(error.message);
                    });
            });

            // Handle Google Login
            document.getElementById('google-login-btn').addEventListener('click', () => {
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider)
                    .then((result) => {
                        const user = result.user;
                        // Check if new user -> save to DB
                        if (result.additionalUserInfo.isNewUser) {
                            db.collection('users').doc(user.uid).set({
                                name: user.displayName,
                                email: user.email,
                                createdAt: firebase.firestore.FieldValue.serverTimestamp()
                            }, { merge: true });
                        }
                        showToast("Welcome " + user.displayName);
                        modalOverlay.classList.remove('active');
                    })
                    .catch((error) => {
                        showToast(error.message);
                    });
            });
        }

        function openAuthModal() {
            document.getElementById('login-modal-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // PASSWORD VISIBILITY TOGGLE
        function togglePassword(inputId, icon) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                // Switch to eye-off icon
                icon.innerHTML = '<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>';
            } else {
                input.type = 'password';
                // Switch back to eye icon
                icon.innerHTML = '<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>';
            }
        }

        // REAL DATA FETCHING
        async function loadCategories() {
            try {
                // Fetch categories from Firestore
                const snapshot = await db.collection('categories').get();
                const categories = snapshot.docs
                    .map(doc => ({id: doc.id, ...doc.data()}))
                    .filter(c => c.enabled !== false); 

                const desktopNav = document.getElementById('desktop-nav-categories');
                const mobileNav = document.getElementById('mobile-nav-categories');
                
                const dHtml = categories.map(c => 
                    `<a href="shop.html?category=${encodeURIComponent(c.name)}" class="d-category-item">${c.name}</a>`
                ).join('');
                
                const mHtml = categories.map(c => 
                    `<a href="shop.html?category=${encodeURIComponent(c.name)}" class="m-category-item">${c.name}</a>`
                ).join('');
                
                if(desktopNav) desktopNav.innerHTML = dHtml;
                if(mobileNav) mobileNav.innerHTML = mHtml;

            } catch (error) {
                console.error("Error loading categories:", error);
            }
        }

        // AUTH CHECK
        function checkAuth() {
            auth.onAuthStateChanged(async user => {
                currentUser = user;
                const triggerDesktop = document.getElementById('login-trigger-desktop');
                const triggerMobile = document.getElementById('mobile-profile-trigger');
                const mProfilePopup = document.getElementById('m-profile-popup');
                const authOnlyLinks = document.querySelectorAll('.auth-only');

                if (user) {
                    syncCartToFirestore();
                    syncWishlistToFirestore(); // Sync wishlist when logged in
                    
                    // Fix: Sometimes displayName is null immediately after creation
                    let name = user.displayName;
                    if (!name) {
                        try {
                            const userDoc = await db.collection('users').doc(user.uid).get();
                            if (userDoc.exists && userDoc.data().name) {
                                name = userDoc.data().name;
                            } else {
                                name = 'User';
                            }
                        } catch(e) { name = 'User'; }
                    }
                    
                    authOnlyLinks.forEach(el => el.classList.remove('auth-hidden'));

                    // Desktop Profile Update
                    document.getElementById('user-name').textContent = name;
                    document.getElementById('user-email').textContent = user.email;
                    
                    triggerDesktop.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
                        Sign Out
                    `;
                    triggerDesktop.onclick = (e) => { e.preventDefault(); auth.signOut(); };

                    // Mobile Profile Update
                    document.getElementById('user-name-mobile').textContent = name;
                    document.getElementById('user-phone-mobile').innerHTML = user.email;
                    
                    triggerMobile.onclick = (e) => {
                        e.stopPropagation();
                        if(e.target.closest('.m-profile-popup-menu')) return;
                        mProfilePopup.classList.toggle('active');
                    }
                    
                    document.getElementById('mobile-logout-btn').onclick = () => auth.signOut();

                } else {
                    // Guest State
                    authOnlyLinks.forEach(el => el.classList.add('auth-hidden'));

                    document.getElementById('user-name').textContent = "Guest User";
                    document.getElementById('user-email').textContent = "Sign in to sync";
                    
                    triggerDesktop.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" x2="3" y1="12" y2="12"/></svg>
                        Sign In
                    `;
                    triggerDesktop.onclick = (e) => { e.preventDefault(); openAuthModal(); };

                    document.getElementById('user-name-mobile').textContent = "Guest";
                    document.getElementById('user-phone-mobile').innerHTML = '<span class="m-login-text">Login / Sign Up</span>';
                    
                    mProfilePopup.classList.remove('active');
                    triggerMobile.onclick = (e) => { e.preventDefault(); openAuthModal(); };
                }
            });
        }

        // UI TOGGLES
        function initNavbarUI() {
            // Mobile Menu
            const mMenuToggle = document.getElementById('m-menu-toggle');
            const mDrawerClose = document.getElementById('m-drawer-close');
            const mOverlay = document.getElementById('m-overlay');
            const mDrawer = document.querySelector('.m-drawer');

            function toggleDrawer() {
                mOverlay.classList.toggle('open');
            }

            if(mMenuToggle) mMenuToggle.onclick = toggleDrawer;
            if(mDrawerClose) mDrawerClose.onclick = toggleDrawer;
            if(mOverlay) mOverlay.onclick = (e) => { if(e.target === mOverlay) toggleDrawer(); };

            // Desktop Profile
            const pToggle = document.getElementById('d-profile-toggle');
            const pPopup = document.getElementById('profile-popup');
            if(pToggle) {
                pToggle.onclick = (e) => { e.stopPropagation(); pPopup.classList.toggle('show'); };
                document.onclick = () => pPopup.classList.remove('show');
            }

            // Mobile Category Dropdown
            const mCatToggle = document.getElementById('m-categories-toggle');
            const mCatContent = document.getElementById('mobile-nav-categories');
            if(mCatToggle) {
                mCatToggle.onclick = () => {
                    mCatContent.classList.toggle('show');
                    mCatToggle.classList.toggle('active');
                }
            }

            // Desktop Cart
            const dCartToggle = document.getElementById('d-cart-toggle');
            const cartPopup = document.getElementById('cart-popup');
            if (dCartToggle && cartPopup) {
                dCartToggle.onclick = (e) => { e.stopPropagation(); cartPopup.classList.toggle('show'); };
                cartPopup.onclick = (e) => e.stopPropagation();
                document.addEventListener('click', () => cartPopup.classList.remove('show'));
            }

            // Mobile Cart
            const mCartToggle = document.getElementById('m-cart-toggle');
            const cartOverlay = document.getElementById('cart-overlay');
            const cartDrawerClose = document.getElementById('cart-drawer-close');
            if (mCartToggle && cartOverlay) {
                mCartToggle.onclick = () => cartOverlay.classList.add('open');
                cartDrawerClose.onclick = () => cartOverlay.classList.remove('open');
                cartOverlay.onclick = (e) => { if(e.target === cartOverlay) cartOverlay.classList.remove('open'); };
            }

            // Mobile Search
            const mSearchToggle = document.getElementById('m-search-toggle');
            const mSearchOverlay = document.getElementById('m-search-overlay');
            const mSearchClose = document.getElementById('m-search-close');
            if(mSearchToggle) {
                mSearchToggle.onclick = () => mSearchOverlay.style.display = 'flex';
                mSearchClose.onclick = () => mSearchOverlay.style.display = 'none';
            }
        }

        // SEARCH FUNCTIONALITY
        function initSearch() {
            const handleSearch = (e) => {
                if (e.key === 'Enter') {
                    const query = e.target.value.trim();
                    if (query) {
                        window.location.href = `shop.html?search=${encodeURIComponent(query)}`;
                    }
                }
            };
            
            const dSearch = document.getElementById('desktop-search');
            const mSearch = document.getElementById('mobile-search');
            
            if (dSearch) dSearch.addEventListener('keypress', handleSearch);
            if (mSearch) mSearch.addEventListener('keypress', handleSearch);
        }

        // CART LOGIC (FIXED STRING/NUMBER COMPARISON)
        function removeFromCart(uniqueId) {
            // Using String() conversion for safe comparison
            cart = cart.filter(item => String(item.uniqueId) !== String(uniqueId));
            saveCart(true);
            renderCart();
        }

        function updateQuantity(uniqueId, change) {
            // Using String() conversion for safe comparison
            const item = cart.find(item => String(item.uniqueId) === String(uniqueId));
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(uniqueId);
                } else {
                    saveCart(true);
                    renderCart();
                }
            }
        }

        async function syncCartToFirestore() {
            if (!currentUser) return;
            try {
                const doc = await db.collection('users').doc(currentUser.uid).get();
                if (doc.exists && doc.data().cart) {
                    if (cart.length === 0) {
                        cart = doc.data().cart;
                        saveCart(false);
                        renderCart();
                    } else {
                         const dbCart = doc.data().cart || [];
                         cart.forEach(localItem => {
                             const existing = dbCart.find(d => String(d.uniqueId) === String(localItem.uniqueId));
                             if (existing) {
                                 existing.quantity = Math.max(existing.quantity, localItem.quantity);
                             } else {
                                 dbCart.push(localItem);
                             }
                         });
                         cart = dbCart;
                         saveCart(true); 
                         renderCart();
                    }
                } else if (cart.length > 0) {
                    saveCart(true);
                }
            } catch (e) { console.error("Sync error", e); }
        }

        function saveCart(syncDB) {
            localStorage.setItem('vastramaya_cart', JSON.stringify(cart));
            if (syncDB && currentUser) {
                db.collection('users').doc(currentUser.uid).update({
                    cart: cart
                }).catch(err => console.log("Error syncing cart", err));
            }
        }

        function renderCart() {
            const desktopBody = document.getElementById('cart-items-desktop');
            const mobileBody = document.getElementById('cart-items-mobile');
            const badgeDesktop = document.getElementById('cart-badge-desktop');
            const badgeMobile = document.getElementById('cart-badge-mobile');
            const totalDesktop = document.getElementById('cart-total-desktop');
            const totalMobile = document.getElementById('cart-total-mobile');
            const countDesktop = document.getElementById('cart-count-desktop');
            const countMobile = document.getElementById('cart-count-mobile');

            let total = 0;
            let count = 0;
            let html = '';

            if (cart.length === 0) {
                html = '<div class="empty-cart-msg">Your cart is empty</div>';
            } else {
                cart.forEach(item => {
                    total += item.price * item.quantity;
                    count += item.quantity;
                    html += `
                        <div class="cart-item">
                            <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                            <div class="cart-item-details">
                                <div class="cart-item-title">${item.name}</div>
                                <div style="font-size:12px; color:var(--text-light); margin-bottom:4px;">
                                    ${item.color ? `Color: ${item.color}` : ''} 
                                    ${item.size ? `Size: ${item.size}` : ''}
                                </div>
                                <div class="cart-item-price">â‚¹${item.price}</div>
                                <div class="cart-item-quantity">
                                    <div class="quantity-btn" onclick="updateQuantity('${item.uniqueId}', -1)">-</div>
                                    <div class="quantity-value">${item.quantity}</div>
                                    <div class="quantity-btn" onclick="updateQuantity('${item.uniqueId}', 1)">+</div>
                                </div>
                            </div>
                            <div class="cart-item-remove" onclick="removeFromCart('${item.uniqueId}')">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                            </div>
                        </div>
                    `;
                });
            }

            if (desktopBody) desktopBody.innerHTML = html;
            if (mobileBody) mobileBody.innerHTML = html;

            if (badgeDesktop) { badgeDesktop.textContent = count; badgeDesktop.style.display = count > 0 ? 'flex' : 'none'; }
            if (badgeMobile) { badgeMobile.textContent = count; badgeMobile.style.display = count > 0 ? 'flex' : 'none'; }

            if (totalDesktop) totalDesktop.textContent = `â‚¹${total.toFixed(2)}`;
            if (totalMobile) totalMobile.textContent = `â‚¹${total.toFixed(2)}`;
            
            if (countDesktop) countDesktop.textContent = `${count} item${count !== 1 ? 's' : ''}`;
            if (countMobile) countMobile.textContent = `Your Cart (${count})`;
        }

        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const el = document.createElement('div');
            el.className = 'toast';
            el.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#4a9c7d" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg><span>${msg}</span>`;
            container.appendChild(el);
            setTimeout(() => el.remove(), 3000);
        }
    </script>
</body>
</html>
